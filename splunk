curl -v -k https://<splunk-host>:8088/services/collector/event \
  -H "Authorization: Splunk <SPLUNK_HEC_TOKEN>" \
  -H "Content-Type: application/json" \
  -d @<(echo "{\"event\": \"$(sed 's/"/\\"/g' report.html | sed ':a;N;$!ba;s/\n/ /g')\", \"sourcetype\": \"custom_html\", \"index\": \"main\"}")

index=main sourcetype=custom_html | sort -_time desc | table _time, _raw


<dashboard>
  <label>HTML Renderer</label>
  <row>
    <panel>
      <title>Rendered HTML</title>
      <html>
        <![CDATA[
        <div id="rendered_html" style="border:1px solid #ccc; padding:10px; background:#fff;"></div>

        <script>
          require([
            "splunkjs/mvc/searchmanager",
            "splunkjs/mvc"
          ], function(SearchManager, mvc) {

            var search = new SearchManager({
              id: "htmlSearch",
              search: "index=main sourcetype=custom_html | sort -_time desc | head 1 | table _raw",
              preview: false
            });

            search.data("results").on("data", function(results) {
              if (results.hasData()) {
                var htmlData = results.data().rows[0][0];
                
                // Decode escaped quotes (optional depending on encoding)
                htmlData = htmlData.replace(/\\"/g, '"');

                // Inject as HTML content
                document.getElementById("rendered_html").innerHTML = htmlData;
              } else {
                document.getElementById("rendered_html").innerHTML = "<p>No HTML content found.</p>";
              }
            });
          });
        </script>
        ]]>
      </html>
    </panel>
  </row>
</dashboard>
